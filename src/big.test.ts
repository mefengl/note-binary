import { test, expect } from "vitest";
import { bigIntBytes, bigIntFromBytes } from "./big.js";

test("bigIntBytes()", () => {
	expect(bigIntBytes(1n)).toStrictEqual(new Uint8Array([0x01]));
	expect(bigIntBytes(255n)).toStrictEqual(new Uint8Array([0xff]));
	expect(bigIntBytes(256n)).toStrictEqual(new Uint8Array([0x01, 0x00]));
	expect(bigIntBytes(-256n)).toStrictEqual(new Uint8Array([0x01, 0x00]));
	expect(
		bigIntBytes(5476057457410545405175640567415649081748931656501235026509713265394n)
	).toStrictEqual(
		new Uint8Array([
			0x33, 0xff, 0x8e, 0xec, 0x07, 0x9c, 0x46, 0x65, 0x7a, 0x20, 0xb5, 0xd4, 0xb4, 0x7d, 0xf6,
			0xb0, 0x59, 0xca, 0x46, 0xb4, 0x4b, 0xfa, 0xae, 0x0d, 0x3b, 0xf6, 0x52, 0xf2
		])
	);
});

test("bigIntFromBytes()", () => {
	expect(bigIntFromBytes(new Uint8Array([0x01]))).toBe(1n);
	expect(bigIntFromBytes(new Uint8Array([0xff]))).toBe(255n);
	expect(bigIntFromBytes(new Uint8Array([0x01, 0x00]))).toBe(256n);
	expect(
		bigIntFromBytes(
			new Uint8Array([
				0x33, 0xff, 0x8e, 0xec, 0x07, 0x9c, 0x46, 0x65, 0x7a, 0x20, 0xb5, 0xd4, 0xb4, 0x7d, 0xf6,
				0xb0, 0x59, 0xca, 0x46, 0xb4, 0x4b, 0xfa, 0xae, 0x0d, 0x3b, 0xf6, 0x52, 0xf2
			])
		)
	).toBe(5476057457410545405175640567415649081748931656501235026509713265394n);
});
